<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance System</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <div id="formSection" class="section active container">
        <h1>Attendance Form</h1>
        <form id="attendanceForm">
            <label>Student's Name:</label>
            <input type="text" id="studentName" placeholder="First Name, Middle Initial, Last Name" required>

            <label>Grade Level:</label>
            <select id="gradeLevel" required>
                <option value="ABM-11">ABM-11</option>
                <option value="HUMSS-11">HUMSS-11</option>
                <option value="STEM-11">STEM-11</option>
                <option value="TVL-11">TVL-11</option>
                <option value="ABM-12">ABM-12</option>
                <option value="HUMSS-12">HUMSS-12</option>
                <option value="STEM-12">STEM-12</option>
                <option value="TVL-12">TVL-12</option>
            </select>

            <label>LRN:</label>
            <input type="text" id="lrn" required>

            <label>Subject:</label>
            <input type="text" id="subject" required>

            <label>Attendance:</label>
            <select id="overallAttendance" required>
                <option value="AM Class">AM Class</option>
                <option value="PM Class">PM Class</option>
            </select>

            <label>Date:</label>
            <input type="date" id="date" readonly>

            <div id="errorMessage" class="error"></div>

            <button type="button" onclick="submitForm()">Submit</button>
            <button type="button" onclick="showSection('recordsSection')">Records</button>
        </form>
    </div>

    <div id="submittedSection" class="section container">
        <h1>Your Response Was Submitted</h1>
        <button onclick="showSection('formSection')">Go Back</button>
    </div>

    <div id="recordsSection" class="section container">
        <h1>Enter Password to View Records</h1>
        <form onsubmit="checkPassword(event)">
            <input type="password" id="password" placeholder="Password" required>
            <div id="passwordError" class="error"></div>
            <button type="submit">Submit</button>
        </form>

        <div id="recordsDisplay" style="display:none;">
            <h2>Attendance Records</h2>
            <input type="text" id="searchInput" placeholder="Search Name, LRN, or Subject..." oninput="searchRecords()">

            <button class="reset" onclick="requestDelete()">Reset Records</button>
            <button onclick="downloadCSV()">Download CSV</button>

            <p id="noRecords" style="display:none;">No records found.</p>
            <div id="recordsContainer"></div>

            <button onclick="showSection('formSection')">Back</button>
        </div>
    </div>
</body>
</html>
